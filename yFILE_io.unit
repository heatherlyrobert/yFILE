#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                yFILE.h                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include private header               yFILE_priv.h                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
SCRP          (IO) verify reading and writing empty file                         yFILE_reader, yFILE_writer                                                                            ((15.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((15.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        yfile__unit_quiet                                                                                                                 i_equal     0                                                                                                    
     exec     call configuration                   yFILE_whoami                "/usr/local/bin/gyges", "3.5c", "truly awesome", "big, crazy beast", "gyges", "spreadsheet", NULL, NULL, NULL       i_equal     0                                                                                                    
     exec     remove the test directory            yURG_rmdir                  "/tmp/yFILE"                                                                                          i_equal     0                                                                                                    
     exec     ... check for output                 yURG_peek_exists            "/tmp/yFILE/untitled.gyges"                                                                           i_lesser    0                                                                                                    

   COND       setup directory                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((06.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     create the test directory            yURG_mkdir                  "/tmp/yFILE"                      , "root"   , "root"    , "0700"                                     i_equal     0                                                                                                    
     exec     change the file loc                  yFILE_loc                   "/tmp/yFILE"                                                                                          i_equal     0                                                                                                    
     echo     ... check saved location             - - - - - - - - - - - - -   myFILE.f_loc                                                                                          s_equal     /tmp/yFILE/                                                                                                                                          

   COND       verify writing an empty file                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((06.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call write                           yFILE_writer                                                                                                                      i_equal     0                                                                                                    
     exec     ... check for output                 yURG_peek_exists            "/tmp/yFILE/untitled.gyges"                                                                           i_equal     0                                                                                                    
     exec     ... check shebang                    yURG_peek                   "/tmp/yFILE/untitled.gyges"       , 0                                                                 s_equal     #!/usr/local/bin/gyges                                                                               
     exec     ... check blank line                 yURG_peek                   "/tmp/yFILE/untitled.gyges"       , 'Ö'                                                               s_equal                                                                                                          
     exec     ... check source program             yURG_peek                   "/tmp/yFILE/untitled.gyges"       , 'Ö'                                                               s_equal     s_program    ¬ gyges                ¬ 3.5c  ¬ truly²awesome ¬                                          
     exec     ... check oneline                    yURG_peek                   "/tmp/yFILE/untitled.gyges"       , 'Ö'                                                               s_equal     s_oneline    ¬ big,²crazy²beast ¬                                                                  
     exec     ... check content description        yURG_peek                   "/tmp/yFILE/untitled.gyges"       , 'Ö'                                                               s_equal     s_content    ¬ spreadsheet ¬                                                                  
     exec     ... check full filename              yURG_peek                   "/tmp/yFILE/untitled.gyges"       , 'Ö'                                                               s_equal     s_filename   ¬ /tmp/yFILE/untitled.gyges ¬                                                                  
     exec     ... check timestamp                  yURG_peek                   "/tmp/yFILE/untitled.gyges"       , 'Ö'                                                               s_equal     s_written    ¬ ¬¬.¬¬.¬¬.¬¬.¬¬.¬¬.¬.¬¬.¬¬¬ ¬                                                                 
     exec     ... check blank line                 yURG_peek                   "/tmp/yFILE/untitled.gyges"       , 'Ö'                                                               s_equal                                                                                                          
     exec     ... check whimper                    yURG_peek                   "/tmp/yFILE/untitled.gyges"       , '»'                                                               s_equal     # end-of-file. ¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬¬               



   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((17.012))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     remove the test directory            yURG_rmdir                  "/tmp/yFILE"                                                                                          i_equal     0                                                                                                    
     exec     ... check for output                 yURG_peek_exists            "/tmp/yFILE/untitled.gyges"                                                                           i_lesser    0                                                                                                    
     exec     stop testing                         yfile__unit_end                                                                                                                   i_equal     0                                                                                                    
